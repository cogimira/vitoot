### DDD工厂

#### DDD工厂特征

    1.DDD工厂一次应该创建整个聚合，并且确保它的不变条件得到满足

#### 领域服务中的工厂（防腐层、开放主机服务、发布语言）

    1.将对象在上下文之间进行翻译


### 资源库

#### 学习路线

    1.两种资源库类型的选用
    2.通过持久化框架来实现资源库（hibernate）
    3.为什么资源库需要额外的行为
    4.如何进行类型层级资源库设计
    5.数据库访问对象和资源库的区别

#### 基本特征

    1.通常将聚合放在资源库当中，资源库会对聚合进行持久化
    2.聚合类型和资源库存通常存在一一对应的关系
    3.严格的讲，只有聚合才会拥有资源库

##### 面向集合的资源库

    1.传统DDD的基本思想
    2.想客户隐藏持久化机制
    3.标识保存在根实体当中，可以用一个set集合来进行模拟
    4.要修改一个对象，只需要从集合中取出对象执行相应的方法就行了，并不需要重新保存
    5.面向集合的资源库不应该将持久化的接口暴露到客户端
    6.需要跟踪对象的变化

#### 面向集合的资源库处理方法

    1.隐式读的时候复制（备份读出来的数据，再和客户端返回的数据进行比较）
    2.隐式写时候复制 （向客户端中委派对象，委派方法标记脏值并且保存备份，持久化的时候进行脏值检查）
    3.显式写前复制

#### 面向持久化的资源库

    1.面向持久化的资源库不支持对对象变化的跟踪，不管是显示的还是隐式的
    2.面向集合的资源库适合k、v数据库，如果以后进行数据库迁移需要考虑清楚
    3.显式调用save方法
    4.也成为面向聚合的储存
    5.数据网织，需要引入分布式

#### 额外的行为fan

    1.有时候为了提高性能，可以直接返回子聚合，虽然那不是聚合的设计原则

#### 管理事务

    1.事物管理不应该放在领域模型或者领域层中，因为它们的操作都是细粒度的，通常放在应用层当中，然后为每一个用例创建一个门面，门面中的业务方法通常都是粗粒度的
    2.用户界面调用门面中的方法

#### 类型层级（有关继承）

    1.谨慎使用吧

#### 资源库 VS DAO

    1.有时候被当作同义词，但是它们并不是一种东西
    2.DAO从数据库表看待问题，提供CURD操作
    3.设计资源库，应该面向集合，而不是数据操作，这样有助将领域当成模型来看